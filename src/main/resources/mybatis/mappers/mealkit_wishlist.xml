<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mealkitWishlist">

	<resultMap type="mealkitWishListVO" id="wishlist">
	
		<id property="no" column="no"/>
		<result property="id" column="id"/>
		<result property="mealkitNo" column="mealkit_no"/>
		<result property="choice_date" column="choice_date"/>
		
		<association property="mealkitVO" javaType="mealkitVO">
			<id property="no" column="no"/>
			<result property="id" column="id"/>
			<result property="title" column="title"/>
			<result property="contents" column="contents"/>
			<result property="category" column="category"/>
			<result property="price" column="price"/>
			<result property="stock" column="stock"/>
			<result property="pictures" column="pictures"/>
			<result property="orders" column="orders"/>
			<result property="origin" column="origin"/>
			<result property="views" column="views"/>
			<result property="soldout" column="soldout"/>
			<result property="postDate" column="post_date"/>
		</association>
		
		<association property="memberVO" javaType="memberVO">
			<id property="id" column="id"/>
			<result property="name" column="name"/>
			<result property="nickname" column="nickname"/>
			<result property="phone" column="phone"/>
			<result property="zipcode" column="zipcode"/>
			<result property="address1" column="address1"/>
			<result property="address2" column="address2"/>
			<result property="profile" column="profile"/>
			<result property="joinDate" column="join_date"/>
		</association>
		
	</resultMap>
	
	<select id="selectMealkitWishlist" parameterType="mealkitWishListVO" resultType="int">
	     SELECT COUNT(*)
	     FROM mealkit_wishlist
	     WHERE id = #{id}
	     AND mealkit_no = #{mealkitNo}
	 </select>

    <insert id="insertMealkitWishlist" parameterType="mealkitWishListVO">
        INSERT INTO mealkit_wishlist (id, mealkit_no, choice_date)
        VALUES (#{id}, #{mealkitNo}, CURRENT_TIMESTAMP)
    </insert>
	
</mapper>